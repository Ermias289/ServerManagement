@page "/servers"

<h3>Servers</h3>
<br />
<br />
<div class="container-fluid text-center">
	<div class="row">
		@foreach (string city in cities)
		{
			<div class="col">
				<div class="card" style="width: 10rem;">
					<img src="/Image1.png" class="card-img-top">
					<div class="card-body">
						<button type="button" class="btn btn-primary" @onclick="() => filterByCity(city)"> @city </button>
					</div>
				</div>
			</div>
		}
	</div>
	
</div>
	

<ul>
	@foreach (var server in servers)
	{
		<li>
			@server.Name in @server.City is <span style="color : @(server.IsOnline ? "green" : "red")">
			@(server.IsOnline ? "Online" : "Offline")
			</span>
			<a href="/server/@server.ServerId" class="btn btn-link"> Edit </a>

		</li>
}
</ul>

@code {

	private string newCity = "non";

	private List<Server> servers = new List<Server>();

	private List<string> cities = Cities.GetAllCities();

	protected override void OnInitialized()
	{
		servers = ServersRepository.GetSeversByCity("Non");
	}

	public  void filterByCity(string city)
	{
		servers = ServersRepository.GetSeversByCity(city);

		StateHasChanged();
	}

}
